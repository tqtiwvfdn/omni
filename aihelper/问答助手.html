<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½é—®ç­”åŠ©æ‰‹ - AIè¡Œå‘˜åŠ©æ‰‹æ ¸å¿ƒ</title>
    <script src="/console/style/tailwindcss.3.0.23.js"></script>
    <style>
        body {
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .liquid-glass {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .liquid-glass-strong {
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
        }
        
        .specular-highlight {
            position: relative;
            overflow: hidden;
        }
        
        .specular-highlight::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s ease;
            pointer-events: none;
        }
        
        .specular-highlight:hover::before {
            left: 100%;
        }
        
        .upload-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 2px dashed rgba(59, 130, 246, 0.3);
            border-radius: 16px;
            padding: 32px;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
            text-align: center;
        }
        
        .upload-card:hover {
            border-color: rgba(59, 130, 246, 0.5);
            background: rgba(255, 255, 255, 0.95);
            transform: translateY(-2px);
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.1);
        }
        
        .upload-card.dragover {
            border-color: rgba(34, 197, 94, 0.5);
            background: rgba(34, 197, 94, 0.05);
        }
        
        .feature-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
        }
        
        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
        }
        
        .message-bubble {
            max-width: 85%;
            word-wrap: break-word;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .user-message {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-left: auto;
            border-radius: 18px 18px 4px 18px;
        }
        
        .assistant-message {
            background: rgba(255, 255, 255, 0.95);
            color: #374151;
            margin-right: auto;
            border-radius: 18px 18px 18px 4px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 18px 18px 18px 4px;
            margin-right: auto;
            max-width: 85%;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #9ca3af;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }
        
        .floating-button {
            transform: translateY(0);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .floating-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        .chat-input {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            padding: 12px 16px;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .chat-input:focus {
            border-color: rgba(59, 130, 246, 0.5);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 16px 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1001;
            min-width: 300px;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.success {
            border-left: 4px solid #10b981;
        }
        
        .toast.error {
            border-left: 4px solid #ef4444;
        }
        
        .toast.info {
            border-left: 4px solid #3b82f6;
        }
        
        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            border-radius: 2px;
            transition: width 0.3s ease;
        }
        
        .plugin-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin: 2px;
        }
        
        .plugin-badge.active {
            background: rgba(34, 197, 94, 0.1);
            color: #059669;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        
        .plugin-badge.inactive {
            background: rgba(156, 163, 175, 0.1);
            color: #6b7280;
            border: 1px solid rgba(156, 163, 175, 0.3);
        }
        
        .doc-slice {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(229, 231, 235, 0.8);
            border-radius: 8px;
            padding: 12px;
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .doc-slice:hover {
            border-color: rgba(59, 130, 246, 0.3);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .highlight {
            background: rgba(250, 204, 21, 0.3);
            padding: 2px 4px;
            border-radius: 4px;
        }
    </style>
</head>
<body class="h-screen flex flex-col">
    <!-- èŠå¤©ç•Œé¢ -->
    <div class="flex-1 flex flex-col w-full overflow-hidden">
        <!-- èŠå¤©å¤´éƒ¨ -->
        <div class="liquid-glass-strong rounded-t-lg p-4 flex items-center justify-between">
            <div class="flex items-center">
                <div class="w-12 h-12 rounded-full mr-4 bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center">
                    <span class="text-white text-lg font-bold">AI</span>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-gray-800">æ‚¨å¥½ï¼Œæˆ‘æ˜¯æ™ºèƒ½é—®ç­”åŠ©æ‰‹</h3>
                    <p class="text-sm text-gray-500">å·¥å·B0001 Â· AIè¡Œå‘˜åŠ©æ‰‹æ ¸å¿ƒ Â· 7Ã—24å°æ—¶ä¸“ä¸šå’¨è¯¢æœåŠ¡</p>
                </div>
            </div>
            <div class="flex space-x-2">
                <button onclick="showPluginManager()" class="liquid-glass floating-button rounded-lg px-4 py-2 text-sm font-medium text-gray-700 specular-highlight">
                    æ’ä»¶ç®¡ç†
                </button>
                <button onclick="showDataStats()" class="liquid-glass floating-button rounded-lg px-4 py-2 text-sm font-medium text-gray-700 specular-highlight">
                    æ•°æ®ç»Ÿè®¡
                </button>
                <button onclick="resetSession()" class="liquid-glass floating-button rounded-lg px-4 py-2 text-sm font-medium text-gray-700 specular-highlight">
                    æ–°å»ºä¼šè¯
                </button>
            </div>
        </div>
        
        <!-- æ¶ˆæ¯åŒºåŸŸ -->
        <div id="messages-container" class="flex-1 liquid-glass-strong p-6 overflow-y-auto">
            <!-- åŠ©æ‰‹ä»‹ç»æ¶ˆæ¯ -->
            <div class="message-bubble assistant-message p-4 mb-6">
                <div class="prose prose-sm max-w-none text-gray-700 mb-4">
                    <p class="mb-3">æˆ‘åŸºäº<span class="font-semibold text-blue-600">RAGæŠ€æœ¯</span>ä»çŸ¥è¯†åº“æ£€ç´¢æ ‡å‡†åŒ–ç­”æ¡ˆå’Œä¸šåŠ¡æµç¨‹æŒ‡å¯¼ï¼Œæ”¯æŒå¤šæ¨¡æ€äº¤äº’ï¼ˆè¯­éŸ³/æ–‡å­—/å›¾åƒï¼‰ã€‚</p>
                    <p class="mb-3">æˆ‘å¯ä»¥å¸®åŠ©æ‚¨è¿›è¡Œ<span class="font-semibold text-blue-600">æ–‡æ¡£é—®ç­”</span>ã€<span class="font-semibold text-blue-600">çŸ¥è¯†åº“æŸ¥è¯¢</span>ã€<span class="font-semibold text-blue-600">ä¸šåŠ¡æµç¨‹æŒ‡å¯¼</span>ï¼Œå‡å°‘æŸ¥è¯¢åˆ¶åº¦æ—¶é—´ï¼Œæå‡ä¸šåŠ¡åŠç†æ•ˆç‡ã€‚</p>
                    <p class="text-sm text-gray-600">ğŸ’¡ <strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong>æ™ºèƒ½é—®ç­”ã€æ–‡æ¡£è§£æã€çŸ¥è¯†æº¯æºã€åˆè§„æ£€æŸ¥ã€æ’ä»¶æ‰©å±•</p>
                </div>
                <p class="text-gray-700 font-medium">è¯·é€‰æ‹©æ‚¨è¦è¿›è¡Œçš„æ“ä½œï¼š</p>
            </div>
            
            <!-- åŠŸèƒ½é€‰æ‹©å¡ç‰‡ -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                <!-- ä¸Šä¼ æ–‡æ¡£å¡ç‰‡ -->
                <div class="upload-card specular-highlight" onclick="showUploadInterface()">
                    <div class="text-4xl mb-4">ğŸ“„</div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">ä¸Šä¼ æ–‡æ¡£åˆ°çŸ¥è¯†åº“</h3>
                    <p class="text-gray-600 text-sm mb-4">æ”¯æŒPDFã€Wordã€Excelæ ¼å¼<br>è‡ªåŠ¨è§£ææ„å»ºä¸“å±çŸ¥è¯†ç´¢å¼•</p>
                    <div class="inline-flex items-center text-blue-600 text-sm font-medium">
                        <span>ç‚¹å‡»ä¸Šä¼ </span>
                        <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                    </div>
                </div>
                
                <!-- çŸ¥è¯†åº“é—®ç­”å¡ç‰‡ -->
                <div class="feature-card specular-highlight" onclick="showKnowledgeBase()">
                    <div class="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center mb-4">
                        <span class="text-white text-lg">ğŸ¦</span>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">è¡Œå†…çŸ¥è¯†åº“é—®ç­”</h3>
                    <p class="text-gray-600 text-sm">åŸºäºé“¶è¡Œä¸šåŠ¡çŸ¥è¯†åº“<br>ä¸“ä¸šé—®ç­”ä¸åˆ¶åº¦æŸ¥è¯¢</p>
                </div>
                
                <!-- èƒ½åŠ›æ’ä»¶å¡ç‰‡ -->
                <div class="feature-card specular-highlight" onclick="showPluginManager()">
                    <div class="w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center mb-4">
                        <span class="text-white text-lg">ğŸ”§</span>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">èƒ½åŠ›æ’ä»¶æ”¯æŒ</h3>
                    <p class="text-gray-600 text-sm">å¯ç”¨å¤šç§èƒ½åŠ›æ’ä»¶<br>MCPåè®®æ·±åº¦èåˆ</p>
                </div>
            </div>
            
            <!-- å¿«æ·æŸ¥è¯¢å¡ç‰‡ -->
            <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 mb-6">
                <h4 class="font-semibold text-gray-800 mb-3">ğŸš€ å¿«æ·æŸ¥è¯¢</h4>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                    <button onclick="quickQuery('å¼€æˆ·æµç¨‹')" class="text-left p-2 bg-white rounded-lg hover:bg-gray-50 text-sm border">
                        ğŸ“‹ å¼€æˆ·æµç¨‹
                    </button>
                    <button onclick="quickQuery('é£æ§æ”¿ç­–')" class="text-left p-2 bg-white rounded-lg hover:bg-gray-50 text-sm border">
                        ğŸ›¡ï¸ é£æ§æ”¿ç­–
                    </button>
                    <button onclick="quickQuery('åˆè§„åˆ¶åº¦')" class="text-left p-2 bg-white rounded-lg hover:bg-gray-50 text-sm border">
                        ğŸ“– åˆè§„åˆ¶åº¦
                    </button>
                    <button onclick="quickQuery('äº§å“è¯´æ˜')" class="text-left p-2 bg-white rounded-lg hover:bg-gray-50 text-sm border">
                        ğŸ’¼ äº§å“è¯´æ˜
                    </button>
                </div>
            </div>
        </div>
        
        <!-- è¾“å…¥åŒºåŸŸ -->
        <div class="liquid-glass-strong rounded-b-lg p-4">
            <div class="flex items-end space-x-3">
                <div class="flex-1">
                    <input type="text" 
                           id="message-input"
                           placeholder="è¯·è¾“å…¥æ‚¨çš„ä¸šåŠ¡é—®é¢˜ï¼Œæ”¯æŒè¯­éŸ³ã€å›¾ç‰‡è¯†åˆ«..."
                           class="w-full chat-input"
                           onkeypress="if(event.key==='Enter') sendMessage()">
                </div>
                <button onclick="triggerVoiceInput()" 
                        class="liquid-glass floating-button rounded-lg p-3 specular-highlight text-gray-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path>
                    </svg>
                </button>
                <button onclick="sendMessage()" 
                        class="liquid-glass floating-button rounded-lg p-3 specular-highlight bg-gradient-to-r from-blue-500 to-purple-600 text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                    </svg>
                </button>
                <button onclick="showKnowledgeBase()" 
                        class="liquid-glass floating-button rounded-lg p-3 specular-highlight text-gray-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        let isTyping = false;
        let knowledgeBase = [
            {
                id: 'doc_001',
                title: 'ä¸ªäººå¼€æˆ·ä¸šåŠ¡æµç¨‹è§„èŒƒ',
                type: 'ä¸šåŠ¡æ“ä½œæ‰‹å†Œ',
                uploadTime: '2024-12-20',
                tags: ['å¼€æˆ·', 'ä¸ªäººä¸šåŠ¡', 'èº«ä»½éªŒè¯', 'KYC'],
                summary: 'è¯¦ç»†è§„å®šä¸ªäººå®¢æˆ·å¼€æˆ·çš„å®Œæ•´æµç¨‹ã€èµ„æ–™è¦æ±‚å’Œé£é™©æ§åˆ¶æªæ–½'
            },
            {
                id: 'doc_002', 
                title: 'ä¿¡è´·é£é™©ç®¡ç†åˆ¶åº¦',
                type: 'é£æ§æ”¿ç­–æ–‡æ¡£',
                uploadTime: '2024-12-18',
                tags: ['ä¿¡è´·', 'é£é™©ç®¡ç†', 'è¯„ä¼°', 'å®¡æ‰¹'],
                summary: 'é“¶è¡Œä¿¡è´·ä¸šåŠ¡é£é™©è¯†åˆ«ã€è¯„ä¼°ã€æ§åˆ¶å’Œç›‘æµ‹çš„åˆ¶åº¦è§„èŒƒ'
            },
            {
                id: 'doc_003',
                title: 'åæ´—é’±åˆè§„æ“ä½œæŒ‡å¼•',
                type: 'åˆè§„æŒ‡å¼•',
                uploadTime: '2024-12-15',
                tags: ['åæ´—é’±', 'åˆè§„', 'å¯ç–‘äº¤æ˜“', 'å®¢æˆ·å°½è°ƒ'],
                summary: 'åæ´—é’±æ³•å¾‹æ³•è§„è¦æ±‚å’Œé“¶è¡Œå†…éƒ¨åˆè§„æ“ä½œå…·ä½“æŒ‡å¼•'
            }
        ];

        let activePlugins = [
            {name: 'OCRç¥¨æ®è¯†åˆ«', status: 'active', accuracy: '99.5%'},
            {name: 'æ„å›¾è¯†åˆ«', status: 'active', accuracy: '98%'},
            {name: 'RAGæ£€ç´¢å¢å¼º', status: 'active', accuracy: '95%'},
            {name: 'é£é™©è¯„ä¼°', status: 'active', accuracy: '96%'},
            {name: 'å¤šè¯­è¨€ç¿»è¯‘', status: 'inactive', accuracy: '97%'},
            {name: 'RPAè‡ªåŠ¨åŒ–', status: 'active', accuracy: '92%'}
        ];

        // Toastæç¤ºå‡½æ•°
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <div class="flex items-center">
                    <div class="mr-3">
                        ${type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸'}
                    </div>
                    <div>
                        <div class="font-medium text-gray-800">${message}</div>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-gray-500 hover:text-gray-700">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            `;
            
            document.body.appendChild(toast);
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // æ·»åŠ æ¶ˆæ¯
        function addMessage(sender, content, showActions = true) {
            const container = document.getElementById('messages-container');
            const messageDiv = document.createElement('div');
            const messageId = 'msg_' + Date.now();
            messageDiv.className = `message-bubble ${sender}-message p-4 mb-4`;
            messageDiv.id = messageId;
            
            if (sender === 'assistant') {
                messageDiv.innerHTML = `<div class="prose prose-sm max-w-none">${content}</div>`;
            } else {
                messageDiv.textContent = content;
            }
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        // æ˜¾ç¤ºä¸Šä¼ ç•Œé¢
        function showUploadInterface() {
            const uploadHTML = `
                <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm text-blue-700">
                                <strong>æ–‡æ¡£ä¸Šä¼ åŠŸèƒ½</strong><br>
                                æ”¯æŒPDFã€Wordã€Excelæ ¼å¼ï¼Œç³»ç»Ÿè‡ªåŠ¨è§£ææ–‡æ¡£å†…å®¹ï¼Œæ„å»ºä¸“å±çŸ¥è¯†ç´¢å¼•ï¼Œæ”¯æŒåŸºäºæ–‡æ¡£å†…å®¹çš„å®æ—¶é—®ç­”ã€‚
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="upload-card mb-4" id="upload-area">
                    <div class="text-4xl mb-4">ğŸ“¤</div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">æ‹–æ‹½æˆ–ç‚¹å‡»ä¸Šä¼ æ–‡æ¡£</h3>
                    <p class="text-gray-600 text-sm mb-4">æ”¯æŒ PDFã€DOCã€DOCXã€XLSã€XLSX æ ¼å¼<br>å•ä¸ªæ–‡ä»¶ä¸è¶…è¿‡20MB</p>
                    <button onclick="triggerFileUpload()" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-2 rounded-lg hover:opacity-90 transition-opacity">
                        é€‰æ‹©æ–‡ä»¶
                    </button>
                    <input type="file" id="file-input" accept=".pdf,.doc,.docx,.xls,.xlsx" style="display: none;" onchange="handleFileUpload(event)">
                </div>
                
                <div class="text-sm text-gray-500">
                    ğŸ’¡ ä¸Šä¼ åçš„æ–‡æ¡£å°†è‡ªåŠ¨è§£æå¹¶æ„å»ºå‘é‡ç´¢å¼•ï¼Œæ‚¨å¯ä»¥åŸºäºæ–‡æ¡£å†…å®¹è¿›è¡Œæ™ºèƒ½é—®ç­”ã€‚
                </div>`;
            
            addMessage('assistant', uploadHTML, false);
            setupDragAndDrop();
        }

        // æ˜¾ç¤ºçŸ¥è¯†åº“
        function showKnowledgeBase() {
            let libraryHTML = `
                <div class="mb-4">
                    <h4 class="font-semibold text-gray-800 mb-2">ğŸ¦ é“¶è¡Œä¸šåŠ¡çŸ¥è¯†åº“</h4>
                    <p class="text-sm text-gray-600">æ¶µç›–ä¸šåŠ¡æ“ä½œæ‰‹å†Œã€ç›‘ç®¡åˆ¶åº¦æ–‡ä»¶ã€é£æ§æ”¿ç­–ã€äº§å“è¯´æ˜ç­‰ä¸“ä¸šæ–‡æ¡£</p>
                </div>`;
            
            knowledgeBase.forEach(doc => {
                libraryHTML += `
                    <div class="doc-slice mb-3" onclick="queryKnowledgeBase('${doc.id}')">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <h5 class="font-medium text-gray-800">${doc.title}</h5>
                                <p class="text-sm text-gray-600">${doc.type} Â· ${doc.uploadTime}</p>
                            </div>
                        </div>
                        <p class="text-xs text-gray-500 mb-2">${doc.summary}</p>
                        <div class="flex flex-wrap gap-1">
                            ${doc.tags.map(tag => 
                                `<span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">${tag}</span>`
                            ).join('')}
                        </div>
                    </div>`;
            });
            
            addMessage('assistant', libraryHTML, false);
        }

        // æ˜¾ç¤ºæ’ä»¶ç®¡ç†
        function showPluginManager() {
            let pluginHTML = `
                <div class="mb-4">
                    <h4 class="font-semibold text-gray-800 mb-2">ğŸ”§ èƒ½åŠ›æ’ä»¶ç®¡ç†</h4>
                    <p class="text-sm text-gray-600">åŸºäºMCPåè®®çš„æ’ä»¶ç”Ÿæ€ï¼Œæ”¯æŒæ™ºèƒ½è¯†åˆ«ã€NLPå¤„ç†ã€çŸ¥è¯†å¢å¼ºã€æµç¨‹è‡ªåŠ¨åŒ–ç­‰</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">`;
            
            activePlugins.forEach(plugin => {
                pluginHTML += `
                    <div class="bg-white rounded-lg p-4 border border-gray-200">
                        <div class="flex justify-between items-start mb-2">
                            <h5 class="font-medium text-gray-800">${plugin.name}</h5>
                            <span class="plugin-badge ${plugin.status}">${plugin.status === 'active' ? 'å·²å¯ç”¨' : 'æœªå¯ç”¨'}</span>
                        </div>
                        <p class="text-sm text-gray-600">å‡†ç¡®ç‡: ${plugin.accuracy}</p>
                        <button onclick="togglePlugin('${plugin.name}')" class="mt-2 text-xs px-3 py-1 rounded-lg ${plugin.status === 'active' ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}">
                            ${plugin.status === 'active' ? 'åœç”¨' : 'å¯ç”¨'}
                        </button>
                    </div>`;
            });
            
            pluginHTML += `
                </div>
                
                <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                    <p class="text-sm text-yellow-700">
                        ğŸ’¡ ç³»ç»Ÿå†…ç½®ä¸°å¯Œçš„é“¶è¡Œä¸šåŠ¡ä¸“ç”¨æ’ä»¶åº“ï¼ŒåŒæ—¶æä¾›å¼€æ”¾å¼æ’ä»¶å¼€å‘æ¥å£ï¼Œæ»¡è¶³å¤šæ¨¡æ€ä¸šåŠ¡éœ€æ±‚ã€‚
                    </p>
                </div>`;
            
            addMessage('assistant', pluginHTML, false);
        }

        // æ˜¾ç¤ºæ•°æ®ç»Ÿè®¡
        function showDataStats() {
            const statsHTML = `
                <div class="mb-4">
                    <h4 class="font-semibold text-gray-800 mb-2">ğŸ“Š æ•°æ®ç»Ÿè®¡åˆ†æ</h4>
                    <p class="text-sm text-gray-600">å¯¹å¤§æ¨¡å‹è¾“å‡ºå›ç­”è¿›è¡Œå¤šç»´åº¦åˆ†ç±»è®¡æ•°å’Œè¶‹åŠ¿åˆ†æ</p>
                </div>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                    <div class="bg-white rounded-lg p-4 border border-gray-200 text-center">
                        <div class="text-2xl font-bold text-blue-600">342</div>
                        <div class="text-sm text-gray-600">ç›´æ¥å›å¤</div>
                    </div>
                    <div class="bg-white rounded-lg p-4 border border-gray-200 text-center">
                        <div class="text-2xl font-bold text-green-600">156</div>
                        <div class="text-sm text-gray-600">çŸ¥è¯†å‹å›ç­”</div>
                    </div>
                    <div class="bg-white rounded-lg p-4 border border-gray-200 text-center">
                        <div class="text-2xl font-bold text-purple-600">89</div>
                        <div class="text-sm text-gray-600">ä»»åŠ¡æµå¼•å¯¼</div>
                    </div>
                    <div class="bg-white rounded-lg p-4 border border-gray-200 text-center">
                        <div class="text-2xl font-bold text-orange-600">23</div>
                        <div class="text-sm text-gray-600">æ’ä»¶è°ƒç”¨</div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg p-4 border border-gray-200 mb-4">
                    <h5 class="font-medium text-gray-800 mb-3">ğŸ“ˆ å“åº”ç±»å‹è¶‹åŠ¿</h5>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">çŸ¥è¯†åº“æ£€ç´¢</span>
                            <div class="flex items-center space-x-2">
                                <div class="progress-bar w-24">
                                    <div class="progress-fill" style="width: 78%"></div>
                                </div>
                                <span class="text-sm">78%</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">ç›´æ¥é—®ç­”</span>
                            <div class="flex items-center space-x-2">
                                <div class="progress-bar w-24">
                                    <div class="progress-fill" style="width: 65%"></div>
                                </div>
                                <span class="text-sm">65%</span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm">æµç¨‹å¼•å¯¼</span>
                            <div class="flex items-center space-x-2">
                                <div class="progress-bar w-24">
                                    <div class="progress-fill" style="width: 45%"></div>
                                </div>
                                <span class="text-sm">45%</span>
                            </div>
                        </div>
                    </div>
                </div>`;
            
            addMessage('assistant', statsHTML, false);
        }

        // å¿«æ·æŸ¥è¯¢
        function quickQuery(topic) {
            addMessage('user', `è¯·é—®${topic}ç›¸å…³çš„åˆ¶åº¦è§„å®š`);
            
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                let response = '';
                switch(topic) {
                    case 'å¼€æˆ·æµç¨‹':
                        response = `
                            <h4 class="font-semibold text-gray-800 mb-3">ğŸ“‹ ä¸ªäººå¼€æˆ·ä¸šåŠ¡æµç¨‹</h4>
                            <div class="bg-blue-50 rounded-lg p-4 mb-4">
                                <p class="text-sm mb-2"><strong>ä¸»è¦æ­¥éª¤ï¼š</strong></p>
                                <ol class="text-sm space-y-1 ml-4">
                                    <li>1. å®¢æˆ·èº«ä»½éªŒè¯ï¼ˆèº«ä»½è¯ä»¶æ ¸éªŒï¼‰</li>
                                    <li>2. åæ´—é’±å®¢æˆ·èº«ä»½è¯†åˆ«</li>
                                    <li>3. è´¦æˆ·ç±»å‹é€‰æ‹©ç¡®è®¤</li>
                                    <li>4. é£é™©ç­‰çº§è¯„ä¼°</li>
                                    <li>5. ç­¾ç½²ç›¸å…³åè®®</li>
                                    <li>6. åˆ¶å¡å¼€é€šæœåŠ¡</li>
                                </ol>
                            </div>
                            <div class="text-sm text-gray-600">
                                ğŸ“– <strong>ç›¸å…³æ–‡æ¡£ï¼š</strong><span class="highlight">ä¸ªäººå¼€æˆ·ä¸šåŠ¡æµç¨‹è§„èŒƒ</span><br>
                                ğŸ” <strong>çŸ¥è¯†æ¥æºï¼š</strong>ä¸šåŠ¡æ“ä½œæ‰‹å†Œç¬¬3ç« 
                            </div>`;
                        break;
                    case 'é£æ§æ”¿ç­–':
                        response = `
                            <h4 class="font-semibold text-gray-800 mb-3">ğŸ›¡ï¸ ä¿¡è´·é£é™©ç®¡ç†åˆ¶åº¦</h4>
                            <div class="bg-red-50 rounded-lg p-4 mb-4">
                                <p class="text-sm mb-2"><strong>æ ¸å¿ƒåŸåˆ™ï¼š</strong></p>
                                <ul class="text-sm space-y-1 ml-4">
                                    <li>â€¢ å…¨é¢é£é™©ç®¡ç†</li>
                                    <li>â€¢ å®¡æ…ç»è¥åŸåˆ™</li>
                                    <li>â€¢ å†…æ§åˆ¶è¡¡æœºåˆ¶</li>
                                    <li>â€¢ é£é™©ä¸æ”¶ç›ŠåŒ¹é…</li>
                                </ul>
                            </div>
                            <div class="text-sm text-gray-600">
                                ğŸ“– <strong>ç›¸å…³æ–‡æ¡£ï¼š</strong><span class="highlight">ä¿¡è´·é£é™©ç®¡ç†åˆ¶åº¦</span><br>
                                ğŸ” <strong>çŸ¥è¯†æ¥æºï¼š</strong>é£æ§æ”¿ç­–æ–‡æ¡£ç¬¬1ç« 
                            </div>`;
                        break;
                    case 'åˆè§„åˆ¶åº¦':
                        response = `
                            <h4 class="font-semibold text-gray-800 mb-3">ğŸ“– åæ´—é’±åˆè§„æ“ä½œæŒ‡å¼•</h4>
                            <div class="bg-green-50 rounded-lg p-4 mb-4">
                                <p class="text-sm mb-2"><strong>é‡ç‚¹è¦æ±‚ï¼š</strong></p>
                                <ul class="text-sm space-y-1 ml-4">
                                    <li>â€¢ å®¢æˆ·å°½èŒè°ƒæŸ¥</li>
                                    <li>â€¢ å¯ç–‘äº¤æ˜“ç›‘æµ‹</li>
                                    <li>â€¢ å¤§é¢äº¤æ˜“æŠ¥å‘Š</li>
                                    <li>â€¢ åæ´—é’±åŸ¹è®­</li>
                                </ul>
                            </div>
                            <div class="text-sm text-gray-600">
                                ğŸ“– <strong>ç›¸å…³æ–‡æ¡£ï¼š</strong><span class="highlight">åæ´—é’±åˆè§„æ“ä½œæŒ‡å¼•</span><br>
                                ğŸ” <strong>çŸ¥è¯†æ¥æºï¼š</strong>åˆè§„æŒ‡å¼•ç¬¬2ç« 
                            </div>`;
                        break;
                    case 'äº§å“è¯´æ˜':
                        response = `
                            <h4 class="font-semibold text-gray-800 mb-3">ğŸ’¼ é“¶è¡Œäº§å“è¯´æ˜ä¹¦</h4>
                            <div class="bg-purple-50 rounded-lg p-4 mb-4">
                                <p class="text-sm mb-2"><strong>ä¸»è¦äº§å“ç±»åˆ«ï¼š</strong></p>
                                <div class="grid grid-cols-2 gap-2 text-sm">
                                    <div>â€¢ å‚¨è“„å­˜æ¬¾äº§å“</div>
                                    <div>â€¢ ç†è´¢æŠ•èµ„äº§å“</div>
                                    <div>â€¢ ä¿¡è´·èèµ„äº§å“</div>
                                    <div>â€¢ æ”¯ä»˜ç»“ç®—äº§å“</div>
                                </div>
                            </div>
                            <div class="text-sm text-gray-600">
                                ğŸ“– <strong>ç›¸å…³æ–‡æ¡£ï¼š</strong><span class="highlight">äº§å“è¯´æ˜ä¹¦æ±‡ç¼–</span><br>
                                ğŸ” <strong>çŸ¥è¯†æ¥æºï¼š</strong>äº§å“çŸ¥è¯†åº“
                            </div>`;
                        break;
                }
                
                addMessage('assistant', response, true);
            }, 1500);
        }

        // è¯­éŸ³è¾“å…¥
        function triggerVoiceInput() {
            showToast('è¯­éŸ³è¯†åˆ«åŠŸèƒ½å·²å¯åŠ¨ï¼Œè¯·å¼€å§‹è¯´è¯...', 'info');
            // è¿™é‡Œå¯ä»¥é›†æˆå®é™…çš„è¯­éŸ³è¯†åˆ«åŠŸèƒ½
        }

        // è®¾ç½®æ‹–æ‹½ä¸Šä¼ 
        function setupDragAndDrop() {
            const uploadArea = document.getElementById('upload-area');
            if (!uploadArea) return;
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFileUpload({ target: { files } });
                }
            });
        }

        // è§¦å‘æ–‡ä»¶é€‰æ‹©
        function triggerFileUpload() {
            document.getElementById('file-input').click();
        }

        // å¤„ç†æ–‡ä»¶ä¸Šä¼ 
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // éªŒè¯æ–‡ä»¶ç±»å‹
            const allowedTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'];
            if (!allowedTypes.includes(file.type)) {
                showToast('ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼Œè¯·ä¸Šä¼ PDFã€Wordæˆ–Excelæ–‡ä»¶', 'error');
                return;
            }
            
            // éªŒè¯æ–‡ä»¶å¤§å°
            if (file.size > 20 * 1024 * 1024) {
                showToast('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡20MB', 'error');
                return;
            }
            
            // æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
            showUploadProgress(file.name);
            
            // æ¨¡æ‹Ÿä¸Šä¼ å’Œè§£æè¿‡ç¨‹
            setTimeout(() => {
                simulateDocumentAnalysis(file.name);
            }, 3000);
        }

        // æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
        function showUploadProgress(fileName) {
            const progressHTML = `
                <div class="bg-white rounded-lg p-4 border border-gray-200">
                    <div class="flex items-center mb-3">
                        <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                        <span class="text-sm font-medium text-gray-700">æ­£åœ¨ä¸Šä¼ : ${fileName}</span>
                    </div>
                    <div class="progress-bar mb-2">
                        <div class="progress-fill" style="width: 0%" id="upload-progress"></div>
                    </div>
                    <div class="text-xs text-gray-500">æ­£åœ¨è§£ææ–‡æ¡£å†…å®¹å¹¶æ„å»ºçŸ¥è¯†ç´¢å¼•...</div>
                </div>`;
            
            addMessage('assistant', progressHTML, false);
            
            // æ¨¡æ‹Ÿè¿›åº¦æ¡
            let progress = 0;
            const progressBar = document.getElementById('upload-progress');
            const interval = setInterval(() => {
                progress += Math.random() * 20;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                }
                if (progressBar) {
                    progressBar.style.width = progress + '%';
                }
            }, 300);
        }

        // æ¨¡æ‹Ÿæ–‡æ¡£è§£æ
        function simulateDocumentAnalysis(fileName) {
            const analysisHTML = `
                <div class="bg-green-50 border-l-4 border-green-400 p-4 mb-4">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm text-green-700">
                                <strong>æ–‡æ¡£è§£æå®Œæˆï¼</strong> å·²æˆåŠŸæ„å»ºä¸“å±çŸ¥è¯†ç´¢å¼•ï¼Œç°åœ¨å¯ä»¥åŸºäºæ–‡æ¡£å†…å®¹è¿›è¡Œé—®ç­”ã€‚
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-lg p-4 border border-gray-200 mb-4">
                    <h4 class="font-semibold text-gray-800 mb-3">ğŸ“„ è§£æç»“æœ</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div><span class="text-gray-600">æ–‡ä»¶åï¼š</span><span class="font-medium">${fileName}</span></div>
                        <div><span class="text-gray-600">æ–‡æ¡£ç±»å‹ï¼š</span><span class="font-medium">ä¸šåŠ¡åˆ¶åº¦æ–‡æ¡£</span></div>
                        <div><span class="text-gray-600">è§£æç« èŠ‚ï¼š</span><span class="font-medium">15ä¸ª</span></div>
                        <div><span class="text-gray-600">çŸ¥è¯†ç‚¹ï¼š</span><span class="font-medium">128ä¸ª</span></div>
                    </div>
                    <div class="mt-3">
                        <span class="text-gray-600 text-sm">è‡ªåŠ¨æ ‡ç­¾ï¼š</span>
                        <div class="flex flex-wrap gap-1 mt-1">
                            <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">é“¶è¡Œä¸šåŠ¡</span>
                            <span class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded">æ“ä½œæµç¨‹</span>
                            <span class="inline-block bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded">åˆè§„åˆ¶åº¦</span>
                            <span class="inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded">é£é™©æ§åˆ¶</span>
                        </div>
                    </div>
                </div>
                
                <div class="text-sm text-gray-600">
                    âœ… å‘é‡åŒ–ç´¢å¼•æ„å»ºå®Œæˆ<br>
                    ğŸ“Š è¯­ä¹‰æ£€ç´¢å‡†ç¡®ç‡: 95.8%<br>
                    ğŸ’¡ ç°åœ¨æ‚¨å¯ä»¥åŸºäºè¯¥æ–‡æ¡£å†…å®¹è¿›è¡Œä¸“ä¸šé—®ç­”
                </div>`;
            
            addMessage('assistant', analysisHTML, true);
            showToast('æ–‡æ¡£è§£æå®Œæˆï¼ŒçŸ¥è¯†ç´¢å¼•å·²æ„å»ºï¼', 'success');
        }

        // å‘é€æ¶ˆæ¯
        function sendMessage() {
            const input = document.getElementById('message-input');
            const message = input.value.trim();
            
            if (!message || isTyping) return;
            
            addMessage('user', message);
            input.value = '';
            
            handleUserMessage(message);
        }

        // å¤„ç†ç”¨æˆ·æ¶ˆæ¯
        function handleUserMessage(message) {
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                let response = '';
                
                if (message.includes('ä¸Šä¼ ') || message.includes('æ–‡æ¡£')) {
                    showUploadInterface();
                    return;
                } else if (message.includes('çŸ¥è¯†åº“') || message.includes('æŸ¥è¯¢')) {
                    showKnowledgeBase();
                    return;
                } else if (message.includes('æ’ä»¶') || message.includes('èƒ½åŠ›')) {
                    showPluginManager();
                    return;
                } else if (message.includes('ç»Ÿè®¡') || message.includes('æ•°æ®')) {
                    showDataStats();
                    return;
                } else {
                    response = `æˆ‘ç†è§£æ‚¨çš„é—®é¢˜ã€‚ä½œä¸ºæ™ºèƒ½é—®ç­”åŠ©æ‰‹ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨ï¼š

<div class="mt-3 space-y-2">
<div class="p-3 bg-blue-50 rounded-lg">
ğŸ“„ <strong>æ–‡æ¡£è§£æé—®ç­”</strong> - ä¸Šä¼ æ–‡æ¡£è‡ªåŠ¨æ„å»ºçŸ¥è¯†ç´¢å¼•ï¼Œæ”¯æŒå®æ—¶é—®ç­”
</div>
<div class="p-3 bg-green-50 rounded-lg">
ğŸ¦ <strong>é“¶è¡ŒçŸ¥è¯†åº“æŸ¥è¯¢</strong> - æ£€ç´¢ä¸šåŠ¡åˆ¶åº¦ã€æ“ä½œè§„èŒƒå’Œåˆè§„æŒ‡å¼•
</div>
<div class="p-3 bg-purple-50 rounded-lg">
ğŸ”§ <strong>èƒ½åŠ›æ’ä»¶æ”¯æŒ</strong> - OCRè¯†åˆ«ã€é£é™©è¯„ä¼°ã€RPAè‡ªåŠ¨åŒ–ç­‰
</div>
<div class="p-3 bg-orange-50 rounded-lg">
ğŸ“Š <strong>çŸ¥è¯†æº¯æºè¿½è¸ª</strong> - æä¾›ç­”æ¡ˆå‡ºå¤„å’Œæ–‡æ¡£åˆ‡ç‰‡é¢„è§ˆ
</div>
</div>

<div class="mt-4 text-sm text-gray-600">
ğŸ’¡ åŸºäºRAGæŠ€æœ¯ï¼Œæˆ‘å¯ä»¥ä»å¤šä¸ªçŸ¥è¯†æºä¸­ç²¾å‡†æ£€ç´¢ä¿¡æ¯ï¼Œä¸ºæ‚¨æä¾›æ ‡å‡†åŒ–çš„ä¸“ä¸šå›ç­”ã€‚è¯·å‘Šè¯‰æˆ‘æ‚¨å…·ä½“éœ€è¦äº†è§£ä»€ä¹ˆä¸šåŠ¡é—®é¢˜ï¼Ÿ
</div>`;
                }
                
                addMessage('assistant', response, true);
            }, 1200);
        }

        // æ˜¾ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨
        function showTypingIndicator() {
            isTyping = true;
            const container = document.getElementById('messages-container');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'typing-indicator mb-4';
            typingDiv.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <span class="ml-2 text-sm text-gray-500">AIåŠ©æ‰‹æ­£åœ¨æ€è€ƒ...</span>
            `;
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;
        }

        // éšè—æ‰“å­—æŒ‡ç¤ºå™¨
        function hideTypingIndicator() {
            isTyping = false;
            const indicator = document.getElementById('typing-indicator');
            if (indicator) {
                indicator.remove();
            }
        }

        // åˆ‡æ¢æ’ä»¶çŠ¶æ€
        function togglePlugin(pluginName) {
            const plugin = activePlugins.find(p => p.name === pluginName);
            if (plugin) {
                plugin.status = plugin.status === 'active' ? 'inactive' : 'active';
                showToast(`${pluginName} å·²${plugin.status === 'active' ? 'å¯ç”¨' : 'åœç”¨'}`, 'success');
                showPluginManager();
            }
        }

        // é‡ç½®ä¼šè¯
        function resetSession() {
            location.reload();
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('é“¶è¡Œæ™ºèƒ½é—®ç­”åŠ©æ‰‹å·²åŠ è½½å®Œæˆ');
        });
    </script>
</body>
</html>