<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½æ¶æ„è¯„ä¼°ï¼ˆASEï¼‰- èµåŒç§‘æŠ€æ¶æ„ç®¡æ§å¹³å°</title>
    <script src="/console/style/tailwindcss.3.0.23.js"></script>
    <script src="/scripts/mermaid.min.js"></script>
    <script src="/console/style/chart.min.js"></script>
    <style>
        body {
            /* background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); */
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .liquid-glass {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .liquid-glass-strong {
            /* background: rgba(255, 255, 255, 0.95); */
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
        }
        
        .specular-highlight {
            position: relative;
            overflow: hidden;
        }
        
        .specular-highlight::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s ease;
            pointer-events: none;
        }
        
        .specular-highlight:hover::before {
            left: 100%;
        }
        
        .assessment-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            padding: 16px;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
        }
        
        .assessment-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.1);
            border-color: rgba(102, 126, 234, 0.3);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .health-score-circle {
            width: 150px;
            height: 150px;
            position: relative;
        }
        
        .health-score-bg {
            fill: none;
            stroke: #e5e7eb;
            stroke-width: 10;
        }
        
        .health-score-progress {
            fill: none;
            stroke-width: 10;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: center;
            transition: stroke-dashoffset 1s ease;
        }
        
        .score-excellent { stroke: #10b981; }
        .score-good { stroke: #3b82f6; }
        .score-warning { stroke: #f59e0b; }
        .score-danger { stroke: #ef4444; }
        
        .message-bubble {
            max-width: 85%;
            word-wrap: break-word;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .user-message {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-left: auto;
            border-radius: 18px 18px 4px 18px;
        }
        
        .assistant-message {
            background: rgba(255, 255, 255, 0.95);
            color: #374151;
            margin-right: auto;
            border-radius: 18px 18px 18px 4px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 18px 18px 18px 4px;
            margin-right: auto;
            max-width: 85%;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #9ca3af;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }
        
        .metric-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 16px;
            transition: all 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-healthy { background: #d1fae5; color: #065f46; }
        .status-warning { background: #fed7aa; color: #92400e; }
        .status-critical { background: #fee2e2; color: #991b1b; }
        .status-info { background: #dbeafe; color: #1e40af; }
        
        .progress-bar {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            max-width: 800px;
            max-height: 90vh;
            margin: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            transform: scale(0.9);
            transition: transform 0.3s ease;
            overflow: hidden;
        }
        
        .modal-overlay.show .modal-content {
            transform: scale(1);
        }
        
        .tech-debt-item {
            background: rgba(255, 243, 199, 0.3);
            border-left: 4px solid #f59e0b;
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
        }
        
        .vulnerability-item {
            background: rgba(254, 226, 226, 0.3);
            border-left: 4px solid #ef4444;
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
        }
        
        .recommendation-item {
            background: rgba(209, 250, 229, 0.3);
            border-left: 4px solid #10b981;
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
        }
        
        .chat-input {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            padding: 12px 16px;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .chat-input:focus {
            border-color: rgba(102, 126, 234, 0.5);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
    </style>
</head>
<body class="h-screen flex flex-col">
    <!-- ä¸»å®¹å™¨ -->
    <div class="flex-1 flex flex-col overflow-hidden w-full p-4">
        <!-- å¤´éƒ¨ -->
        <div class="liquid-glass-strong rounded-lg p-4 mb-4 flex items-center justify-between">
            <div class="flex items-center">
                <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center mr-4">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-gray-800">æ™ºèƒ½æ¶æ„è¯„ä¼°ç³»ç»Ÿï¼ˆASEï¼‰</h3>
                    <p class="text-sm text-gray-500">è‡ªåŠ¨åŒ–å¥åº·è¯Šæ–­ Â· å®æ—¶ç›‘æ§ Â· æ™ºèƒ½ä¼˜åŒ–å»ºè®®</p>
                </div>
            </div>
            <div class="flex space-x-2">
                <button onclick="startFullAssessment()" class="liquid-glass specular-highlight rounded-lg px-4 py-2 text-sm font-medium bg-gradient-to-r from-purple-500 to-blue-500 text-white">
                    å¼€å§‹å…¨é¢è¯„ä¼°
                </button>
                <button onclick="viewHistory()" class="liquid-glass specular-highlight rounded-lg px-4 py-2 text-sm font-medium text-gray-700">
                    å†å²è®°å½•
                </button>
            </div>
        </div>
        
        <!-- å†…å®¹åŒºåŸŸ -->
        <div class="flex-1 flex gap-4 overflow-hidden">
            <!-- å·¦ä¾§è¯„ä¼°åŒºåŸŸ -->
            <div class="flex-1 liquid-glass-strong rounded-lg p-6 overflow-y-auto">
                <!-- å¥åº·åº¦æ€»è§ˆ -->
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">æ¶æ„å¥åº·åº¦æ€»è§ˆ</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- æ€»ä½“è¯„åˆ† -->
                        <div class="metric-card flex items-center justify-center">
                            <div class="text-center">
                                <svg class="health-score-circle mx-auto">
                                    <circle cx="75" cy="75" r="70" class="health-score-bg"></circle>
                                    <circle cx="75" cy="75" r="70" class="health-score-progress score-good" 
                                            style="stroke-dasharray: 440; stroke-dashoffset: 110;"></circle>
                                </svg>
                                <div style="margin-top: -90px;" class="relative">
                                    <div class="text-3xl font-bold text-blue-600">75</div>
                                    <div class="text-sm text-gray-500">æ€»ä½“å¥åº·åº¦</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- æ ¸å¿ƒæŒ‡æ ‡ -->
                        <div class="metric-card">
                            <h5 class="font-medium text-gray-700 mb-3">æ ¸å¿ƒæŒ‡æ ‡</h5>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">æ¶æ„å¤æ‚åº¦</span>
                                    <span class="status-badge status-warning">ä¸­ç­‰</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">æŠ€æœ¯å€ºåŠ¡</span>
                                    <span class="status-badge status-critical">è¾ƒé«˜</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">å®‰å…¨åˆè§„</span>
                                    <span class="status-badge status-healthy">è‰¯å¥½</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-gray-600">æ€§èƒ½æ•ˆç‡</span>
                                    <span class="status-badge status-info">ä¼˜åŒ–ä¸­</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- è¶‹åŠ¿å›¾ -->
                        <div class="metric-card flex flex-col overflow-hidden" style="height: 200px;max-height: 200px;">
                            <h5 class="font-medium text-gray-700 mb-3">å¥åº·åº¦è¶‹åŠ¿</h5>
                            <canvas id="trendChart" width="200" height="120" class="flex-1"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- å¿«é€Ÿè¯„ä¼°å¡ç‰‡ -->
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">å¿«é€Ÿè¯„ä¼°</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="assessment-card specular-highlight" onclick="assessSystem('æŠ€æœ¯å€ºåŠ¡åˆ†æ')">
                            <div class="flex items-start">
                                <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0">
                                    <span class="text-amber-600">âš ï¸</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-800 mb-1">æŠ€æœ¯å€ºåŠ¡æ‰«æ</h4>
                                    <p class="text-sm text-gray-600 mb-2">è¯†åˆ«è¿‡æ—¶æŠ€æœ¯æ ˆã€å†—ä½™ä»£ç ã€å¾ªç¯ä¾èµ–ç­‰é—®é¢˜</p>
                                    <div class="progress-bar">
                                        <div class="progress-fill bg-amber-500" style="width: 65%"></div>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">å·²å‘ç° 23 ä¸ªå¾…ä¼˜åŒ–é¡¹</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-card specular-highlight" onclick="assessSystem('åˆè§„æ€§æ£€æŸ¥')">
                            <div class="flex items-start">
                                <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0">
                                    <span class="text-green-600">âœ…</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-800 mb-1">åˆè§„æ€§æ£€æŸ¥</h4>
                                    <p class="text-sm text-gray-600 mb-2">éªŒè¯æ¶æ„åŸåˆ™éµå¾ªåº¦ã€å®‰å…¨è§„èŒƒç¬¦åˆæ€§</p>
                                    <div class="progress-bar">
                                        <div class="progress-fill bg-green-500" style="width: 85%"></div>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">ç¬¦åˆç‡ 85%</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-card specular-highlight" onclick="assessSystem('æ€§èƒ½ç“¶é¢ˆé¢„æµ‹')">
                            <div class="flex items-start">
                                <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0">
                                    <span class="text-blue-600">ğŸ“Š</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-800 mb-1">æ€§èƒ½ç“¶é¢ˆé¢„æµ‹</h4>
                                    <p class="text-sm text-gray-600 mb-2">åŸºäºå†å²æ•°æ®é¢„æµ‹æ½œåœ¨çš„æ€§èƒ½é—®é¢˜</p>
                                    <div class="progress-bar">
                                        <div class="progress-fill bg-blue-500" style="width: 45%"></div>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">é£é™©ç­‰çº§ï¼šä¸­ç­‰</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-card specular-highlight" onclick="assessSystem('ä¾èµ–å…³ç³»åˆ†æ')">
                            <div class="flex items-start">
                                <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3 flex-shrink-0">
                                    <span class="text-purple-600">ğŸ”—</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-800 mb-1">ä¾èµ–å…³ç³»åˆ†æ</h4>
                                    <p class="text-sm text-gray-600 mb-2">åˆ†æç³»ç»Ÿé—´çš„è€¦åˆåº¦å’Œå¾ªç¯ä¾èµ–</p>
                                    <div class="progress-bar">
                                        <div class="progress-fill bg-purple-500" style="width: 70%"></div>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">è€¦åˆåº¦ï¼šä¸­é«˜</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ç³»ç»Ÿåˆ—è¡¨ -->
                <div>
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">ç³»ç»Ÿå¥åº·çŠ¶æ€</h4>
                    <div class="space-y-2" id="system-list">
                        <!-- ç³»ç»Ÿåˆ—è¡¨å°†åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
            
            <!-- å³ä¾§èŠå¤©åŒºåŸŸ -->
            <div class="w-96 flex flex-col liquid-glass-strong rounded-lg">
                <!-- èŠå¤©å¤´éƒ¨ -->
                <div class="p-4 border-b border-gray-200/50">
                    <h4 class="font-medium text-gray-800">æ¶æ„é¡¾é—®åŠ©æ‰‹</h4>
                    <p class="text-xs text-gray-500">å®æ—¶åˆ†æ Â· æ™ºèƒ½å»ºè®® Â· æŒç»­ä¼˜åŒ–</p>
                </div>
                
                <!-- æ¶ˆæ¯åŒºåŸŸ -->
                <div id="messages-container" class="flex-1 p-4 overflow-y-auto">
                    <div class="message-bubble assistant-message p-4 mb-4">
                        <p class="text-sm">æ‚¨å¥½ï¼æˆ‘æ˜¯æ¶æ„è¯„ä¼°åŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©æ‚¨ï¼š</p>
                        <ul class="text-sm mt-2 space-y-1 text-gray-600">
                            <li>â€¢ åˆ†æç³»ç»Ÿæ¶æ„å¥åº·åº¦</li>
                            <li>â€¢ è¯†åˆ«æŠ€æœ¯å€ºåŠ¡å’Œé£é™©</li>
                            <li>â€¢ æä¾›ä¼˜åŒ–å»ºè®®å’Œæœ€ä½³å®è·µ</li>
                            <li>â€¢ é¢„æµ‹æ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆ</li>
                        </ul>
                        <p class="text-sm mt-3 text-gray-700">è¯·é€‰æ‹©å·¦ä¾§çš„è¯„ä¼°é¡¹å¼€å§‹ï¼Œæˆ–ç›´æ¥è¯¢é—®æˆ‘ä»»ä½•æ¶æ„ç›¸å…³é—®é¢˜ã€‚</p>
                    </div>
                </div>
                
                <!-- è¾“å…¥åŒºåŸŸ -->
                <div class="p-4 border-t border-gray-200/50">
                    <div class="flex items-end space-x-2">
                        <input type="text" 
                               id="message-input"
                               placeholder="è¯¢é—®æ¶æ„ä¼˜åŒ–å»ºè®®..."
                               class="flex-1 chat-input text-sm"
                               onkeypress="if(event.key==='Enter') sendMessage()">
                        <button onclick="sendMessage()" 
                                class="p-2 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-lg">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- è¯¦ç»†æŠ¥å‘Šå¼¹çª— -->
    <div id="detail-modal" class="modal-overlay">
        <div class="modal-content">
            <!-- å¼¹çª—å¤´éƒ¨ -->
            <div class="flex items-center justify-between p-6 border-b border-gray-200/50">
                <h3 class="text-lg font-semibold text-gray-800" id="modal-title">è¯„ä¼°è¯¦ç»†æŠ¥å‘Š</h3>
                <button onclick="closeDetailModal()" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <!-- å¼¹çª—å†…å®¹ -->
            <div class="p-6 overflow-y-auto max-h-96" id="modal-content">
                <!-- å†…å®¹å°†åŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <!-- å¼¹çª—åº•éƒ¨ -->
            <div class="flex items-center justify-between p-6 border-t border-gray-200/50">
                <div class="text-sm text-gray-500">
                    ç”Ÿæˆæ—¶é—´ï¼š<span id="report-time">-</span>
                </div>
                <div class="flex space-x-3">
                    <button onclick="exportReport()" class="liquid-glass rounded-lg px-4 py-2 text-sm font-medium text-gray-700">
                        å¯¼å‡ºæŠ¥å‘Š
                    </button>
                    <button onclick="optimizeNow()" class="bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-lg px-4 py-2 text-sm font-medium">
                        ç«‹å³ä¼˜åŒ–
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ– Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default'
        });

        // ç³»ç»Ÿæ•°æ®
        const systems = [
            { id: 'SYS001', name: 'æ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿ', health: 85, status: 'healthy' },
            { id: 'SYS002', name: 'è´¦æˆ·ç®¡ç†ç³»ç»Ÿ', health: 72, status: 'warning' },
            { id: 'SYS003', name: 'é£æ§ç®¡ç†å¹³å°', health: 91, status: 'healthy' },
            { id: 'SYS004', name: 'æ•°æ®åˆ†æå¹³å°', health: 68, status: 'warning' },
            { id: 'SYS005', name: 'å®¢æˆ·æœåŠ¡ç³»ç»Ÿ', health: 45, status: 'critical' }
        ];

        // è¯„ä¼°æ•°æ®
        const assessmentData = {
            'æŠ€æœ¯å€ºåŠ¡åˆ†æ': {
                title: 'æŠ€æœ¯å€ºåŠ¡æ‰«ææŠ¥å‘Š',
                content: `
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-3">å‘ç°çš„æŠ€æœ¯å€ºåŠ¡</h4>
                        <div class="tech-debt-item">
                            <div class="font-medium text-gray-800">è¿‡æ—¶çš„ä¾èµ–åº“</div>
                            <div class="text-sm text-gray-600 mt-1">å‘ç° 15 ä¸ªä¾èµ–åº“ç‰ˆæœ¬è¿‡æ—§ï¼Œå­˜åœ¨å®‰å…¨é£é™©</div>
                            <div class="text-xs text-amber-600 mt-2">å»ºè®®ï¼šå‡çº§åˆ°æœ€æ–°ç¨³å®šç‰ˆæœ¬</div>
                        </div>
                        <div class="tech-debt-item">
                            <div class="font-medium text-gray-800">é‡å¤ä»£ç </div>
                            <div class="text-sm text-gray-600 mt-1">ä»£ç é‡å¤ç‡è¾¾åˆ° 23%ï¼Œå½±å“ç»´æŠ¤æ•ˆç‡</div>
                            <div class="text-xs text-amber-600 mt-2">å»ºè®®ï¼šæŠ½å–å…¬å…±æ¨¡å—ï¼Œå®æ–½DRYåŸåˆ™</div>
                        </div>
                        <div class="tech-debt-item">
                            <div class="font-medium text-gray-800">ç¼ºå°‘å•å…ƒæµ‹è¯•</div>
                            <div class="text-sm text-gray-600 mt-1">æµ‹è¯•è¦†ç›–ç‡ä»… 45%ï¼Œä½äºæ ‡å‡†è¦æ±‚</div>
                            <div class="text-xs text-amber-600 mt-2">å»ºè®®ï¼šè¡¥å……å…³é”®ä¸šåŠ¡é€»è¾‘çš„å•å…ƒæµ‹è¯•</div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-3">ä¼˜åŒ–è·¯çº¿å›¾</h4>
                        <div class="mermaid">
                            gantt
                                title æŠ€æœ¯å€ºåŠ¡æ¸…ç†è®¡åˆ’
                                dateFormat YYYY-MM-DD
                                section ç¬¬ä¸€é˜¶æ®µ
                                ä¾èµ–åº“å‡çº§     :a1, 2025-02-01, 30d
                                å®‰å…¨æ¼æ´ä¿®å¤   :a2, 2025-02-15, 20d
                                section ç¬¬äºŒé˜¶æ®µ
                                ä»£ç é‡æ„       :b1, 2025-03-01, 45d
                                æ¨¡å—åŒ–æ”¹é€      :b2, 2025-03-15, 30d
                                section ç¬¬ä¸‰é˜¶æ®µ
                                æµ‹è¯•è¦†ç›–æå‡   :c1, 2025-04-01, 60d
                                æ–‡æ¡£å®Œå–„       :c2, 2025-04-15, 30d
                        </div>
                    </div>
                `
            },
            'åˆè§„æ€§æ£€æŸ¥': {
                title: 'æ¶æ„åˆè§„æ€§è¯„ä¼°æŠ¥å‘Š',
                content: `
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-3">åˆè§„æ€§æ£€æŸ¥ç»“æœ</h4>
                        <div class="recommendation-item">
                            <div class="font-medium text-gray-800">âœ… å®‰å…¨è§„èŒƒ</div>
                            <div class="text-sm text-gray-600 mt-1">ç¬¦åˆä¿¡æ¯å®‰å…¨ä¸‰çº§ç­‰ä¿è¦æ±‚</div>
                        </div>
                        <div class="recommendation-item">
                            <div class="font-medium text-gray-800">âœ… æ¶æ„åŸåˆ™</div>
                            <div class="text-sm text-gray-600 mt-1">éµå¾ªå¾®æœåŠ¡æ¶æ„è®¾è®¡åŸåˆ™</div>
                        </div>
                        <div class="vulnerability-item">
                            <div class="font-medium text-gray-800">âš ï¸ æ•°æ®è§„èŒƒ</div>
                            <div class="text-sm text-gray-600 mt-1">éƒ¨åˆ†æ¥å£æœªéµå¾ªRESTfulè§„èŒƒ</div>
                            <div class="text-xs text-red-600 mt-2">éœ€è¦æ”¹è¿›ï¼šæ ‡å‡†åŒ–APIè®¾è®¡</div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-3">åˆè§„æ€§è¶‹åŠ¿</h4>
                        <canvas id="compliance-chart" width="400" height="200"></canvas>
                    </div>
                `
            },
            'æ€§èƒ½ç“¶é¢ˆé¢„æµ‹': {
                title: 'æ€§èƒ½ç“¶é¢ˆé¢„æµ‹åˆ†æ',
                content: `
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-3">æ½œåœ¨æ€§èƒ½é£é™©</h4>
                        <div class="vulnerability-item">
                            <div class="font-medium text-gray-800">æ•°æ®åº“è¿æ¥æ± é…ç½®</div>
                            <div class="text-sm text-gray-600 mt-1">å½“å‰é…ç½®åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å¯èƒ½å‡ºç°è¿æ¥è€—å°½</div>
                            <div class="text-xs text-red-600 mt-2">é¢„æµ‹ï¼šæ—¥äº¤æ˜“é‡è¶…è¿‡100ä¸‡æ—¶è§¦å‘</div>
                        </div>
                        <div class="vulnerability-item">
                            <div class="font-medium text-gray-800">ç¼“å­˜å‘½ä¸­ç‡ä¸‹é™</div>
                            <div class="text-sm text-gray-600 mt-1">Redisç¼“å­˜å‘½ä¸­ç‡å‘ˆä¸‹é™è¶‹åŠ¿ï¼Œå½“å‰ä¸º78%</div>
                            <div class="text-xs text-red-600 mt-2">é¢„æµ‹ï¼š2ä¸ªæœˆåé™è‡³60%ä»¥ä¸‹</div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-3">æ€§èƒ½é¢„æµ‹æ¨¡å‹</h4>
                        <div class="mermaid">
                            graph TD
                                A[å½“å‰è´Ÿè½½: 65%] --> B{è´Ÿè½½å¢é•¿é¢„æµ‹}
                                B -->|æ­£å¸¸å¢é•¿| C[3ä¸ªæœˆå: 75%]
                                B -->|å¿«é€Ÿå¢é•¿| D[3ä¸ªæœˆå: 85%]
                                C --> E[æ€§èƒ½ä¼˜åŒ–å»ºè®®]
                                D --> F[ç´§æ€¥æ‰©å®¹å»ºè®®]
                                E --> G[å¢åŠ ç¼“å­˜<br/>ä¼˜åŒ–SQL]
                                F --> H[æ¨ªå‘æ‰©å±•<br/>è´Ÿè½½å‡è¡¡]
                        </div>
                    </div>
                `
            },
            'ä¾èµ–å…³ç³»åˆ†æ': {
                title: 'ç³»ç»Ÿä¾èµ–å…³ç³»åˆ†æ',
                content: `
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-3">ä¾èµ–å…³ç³»å›¾è°±</h4>
                        <div class="mermaid">
                            graph LR
                                A[æ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿ] --> B[è´¦æˆ·ç®¡ç†ç³»ç»Ÿ]
                                A --> C[é£æ§ç®¡ç†å¹³å°]
                                B --> D[æ•°æ®åˆ†æå¹³å°]
                                C --> D
                                D --> E[å®¢æˆ·æœåŠ¡ç³»ç»Ÿ]
                                B --> E
                                C -.->|å¾ªç¯ä¾èµ–| A
                                style C fill:#fee2e2
                        </div>
                    </div>
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-3">é—®é¢˜è¯Šæ–­</h4>
                        <div class="vulnerability-item">
                            <div class="font-medium text-gray-800">å¾ªç¯ä¾èµ–æ£€æµ‹</div>
                            <div class="text-sm text-gray-600 mt-1">å‘ç° æ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿ ä¸ é£æ§ç®¡ç†å¹³å° å­˜åœ¨å¾ªç¯ä¾èµ–</div>
                            <div class="text-xs text-red-600 mt-2">å½±å“ï¼šå¢åŠ ç³»ç»Ÿè€¦åˆåº¦ï¼Œé™ä½å¯ç»´æŠ¤æ€§</div>
                        </div>
                        <div class="tech-debt-item">
                            <div class="font-medium text-gray-800">é«˜è€¦åˆæ¨¡å—</div>
                            <div class="text-sm text-gray-600 mt-1">è´¦æˆ·ç®¡ç†ç³»ç»Ÿè¢«5ä¸ªç³»ç»Ÿç›´æ¥ä¾èµ–</div>
                            <div class="text-xs text-amber-600 mt-2">å»ºè®®ï¼šå¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—è§£è€¦</div>
                        </div>
                    </div>
                `
            }
        };

        // åˆå§‹åŒ–ç³»ç»Ÿåˆ—è¡¨
        function initSystemList() {
            const container = document.getElementById('system-list');
            systems.forEach(sys => {
                const statusClass = sys.status === 'healthy' ? 'status-healthy' : 
                                   sys.status === 'warning' ? 'status-warning' : 'status-critical';
                const progressColor = sys.status === 'healthy' ? 'bg-green-500' : 
                                     sys.status === 'warning' ? 'bg-amber-500' : 'bg-red-500';
                
                const systemCard = document.createElement('div');
                systemCard.className = 'metric-card cursor-pointer';
                systemCard.onclick = () => assessSpecificSystem(sys.id);
                systemCard.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <div>
                            <span class="font-medium text-gray-800">${sys.name}</span>
                            <span class="ml-2 text-xs text-gray-500">${sys.id}</span>
                        </div>
                        <span class="status-badge ${statusClass}">${sys.health}åˆ†</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill ${progressColor}" style="width: ${sys.health}%"></div>
                    </div>
                `;
                container.appendChild(systemCard);
            });
        }

        // åˆå§‹åŒ–è¶‹åŠ¿å›¾
        function initTrendChart() {
            const ctx = document.getElementById('trendChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ'],
                    datasets: [{
                        label: 'å¥åº·åº¦',
                        data: [82, 78, 75, 73, 75, 75],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 60,
                            max: 100
                        }
                    }
                }
            });
        }

        // è¯„ä¼°ç³»ç»Ÿ
        function assessSystem(type) {
            const data = assessmentData[type];
            if (!data) return;
            
            // æ˜¾ç¤ºè¯¦ç»†æŠ¥å‘Š
            document.getElementById('modal-title').textContent = data.title;
            document.getElementById('modal-content').innerHTML = data.content;
            document.getElementById('report-time').textContent = new Date().toLocaleString();
            document.getElementById('detail-modal').classList.add('show');
            
            // é‡æ–°åˆå§‹åŒ– Mermaid å›¾è¡¨
            setTimeout(() => {
                mermaid.init();
                
                // å¦‚æœæ˜¯åˆè§„æ€§æ£€æŸ¥ï¼Œåˆå§‹åŒ–å›¾è¡¨
                if (type === 'åˆè§„æ€§æ£€æŸ¥') {
                    initComplianceChart();
                }
            }, 100);
            
            // æ·»åŠ èŠå¤©æ¶ˆæ¯
            addMessage('assistant', `å·²å®Œæˆ${type}ï¼Œå‘ç°äº†ä¸€äº›éœ€è¦å…³æ³¨çš„é—®é¢˜ã€‚ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Šäº†è§£å…·ä½“æƒ…å†µå’Œä¼˜åŒ–å»ºè®®ã€‚`);
        }

        // åˆå§‹åŒ–åˆè§„æ€§å›¾è¡¨
        function initComplianceChart() {
            const canvas = document.getElementById('compliance-chart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['å®‰å…¨è§„èŒƒ', 'æ¶æ„åŸåˆ™', 'ç¼–ç è§„èŒƒ', 'æ•°æ®è§„èŒƒ', 'éƒ¨ç½²è§„èŒƒ'],
                    datasets: [{
                        label: 'å½“å‰åˆè§„åº¦',
                        data: [95, 88, 76, 65, 92],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.2)'
                    }, {
                        label: 'ç›®æ ‡åˆè§„åº¦',
                        data: [100, 100, 100, 100, 100],
                        borderColor: '#e5e7eb',
                        backgroundColor: 'rgba(229, 231, 235, 0.1)',
                        borderDash: [5, 5]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        // è¯„ä¼°ç‰¹å®šç³»ç»Ÿ
        function assessSpecificSystem(sysId) {
            const system = systems.find(s => s.id === sysId);
            if (!system) return;
            
            addMessage('user', `è¯·è¯„ä¼° ${system.name} çš„æ¶æ„å¥åº·çŠ¶æ€`);
            
            setTimeout(() => {
                let response = `${system.name}ï¼ˆ${sysId}ï¼‰è¯„ä¼°ç»“æœï¼š\n\n`;
                response += `å¥åº·åº¦è¯„åˆ†ï¼š${system.health}/100\n`;
                
                if (system.health >= 80) {
                    response += 'çŠ¶æ€ï¼šå¥åº·\n\n';
                    response += 'è¯¥ç³»ç»Ÿæ¶æ„è®¾è®¡è‰¯å¥½ï¼Œæ€§èƒ½ç¨³å®šã€‚å»ºè®®ç»§ç»­ä¿æŒå½“å‰çš„æ¶æ„æ¨¡å¼ï¼Œå®šæœŸè¿›è¡Œå°è§„æ¨¡ä¼˜åŒ–ã€‚';
                } else if (system.health >= 60) {
                    response += 'çŠ¶æ€ï¼šéœ€è¦å…³æ³¨\n\n';
                    response += 'å‘ç°ä»¥ä¸‹é—®é¢˜ï¼š\n';
                    response += '1. éƒ¨åˆ†æ¨¡å—è€¦åˆåº¦è¾ƒé«˜\n';
                    response += '2. ç¼ºå°‘å¿…è¦çš„ç¼“å­˜æœºåˆ¶\n';
                    response += '3. æ•°æ®åº“æŸ¥è¯¢éœ€è¦ä¼˜åŒ–\n\n';
                    response += 'å»ºè®®åˆ¶å®šä¼˜åŒ–è®¡åˆ’ï¼Œé€æ­¥æ”¹è¿›æ¶æ„è®¾è®¡ã€‚';
                } else {
                    response += 'çŠ¶æ€ï¼šä¸¥é‡é—®é¢˜\n\n';
                    response += 'ç´§æ€¥é—®é¢˜ï¼š\n';
                    response += '1. å­˜åœ¨å•ç‚¹æ•…éšœé£é™©\n';
                    response += '2. æ€§èƒ½ç“¶é¢ˆæ˜æ˜¾\n';
                    response += '3. æŠ€æœ¯æ ˆä¸¥é‡è¿‡æ—¶\n\n';
                    response += 'å¼ºçƒˆå»ºè®®ç«‹å³å¯åŠ¨æ¶æ„é‡æ„é¡¹ç›®ã€‚';
                }
                
                addMessage('assistant', response);
            }, 1500);
        }

        // å¼€å§‹å…¨é¢è¯„ä¼°
        function startFullAssessment() {
            addMessage('user', 'è¯·å¼€å§‹å…¨é¢çš„æ¶æ„å¥åº·è¯„ä¼°');
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                addMessage('assistant', `æ­£åœ¨æ‰§è¡Œå…¨é¢è¯„ä¼°ï¼ŒåŒ…æ‹¬ä»¥ä¸‹æ–¹é¢ï¼š
                
1. æ¶æ„å¤æ‚åº¦åˆ†æ
2. æŠ€æœ¯å€ºåŠ¡æ‰«æ
3. å®‰å…¨åˆè§„æ€§æ£€æŸ¥
4. æ€§èƒ½ç“¶é¢ˆé¢„æµ‹
5. ä¾èµ–å…³ç³»åˆ†æ

è¯„ä¼°å®Œæˆï¼æ€»ä½“å¥åº·åº¦ä¸º75åˆ†ï¼Œå¤„äº"è‰¯å¥½"æ°´å¹³ã€‚

ä¸»è¦å‘ç°ï¼š
â€¢ æŠ€æœ¯å€ºåŠ¡ï¼šå‘ç°23ä¸ªå¾…ä¼˜åŒ–é¡¹
â€¢ åˆè§„æ€§ï¼š85%ç¬¦åˆæ¶æ„è§„èŒƒ
â€¢ æ€§èƒ½é£é™©ï¼š2ä¸ªæ½œåœ¨ç“¶é¢ˆ
â€¢ ä¾èµ–é—®é¢˜ï¼š1ä¸ªå¾ªç¯ä¾èµ–

è¯·ç‚¹å‡»å„è¯„ä¼°å¡ç‰‡æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Šã€‚`);
                
                // æ›´æ–°ç•Œé¢æ•°æ®
                updateHealthScore(75);
            }, 3000);
        }

        // æ›´æ–°å¥åº·åº¦åˆ†æ•°
        function updateHealthScore(score) {
            const circle = document.querySelector('.health-score-progress');
            const offset = 440 - (440 * score / 100);
            circle.style.strokeDashoffset = offset;
            
            // æ›´æ–°åˆ†æ•°æ˜¾ç¤º
            document.querySelector('.text-3xl').textContent = score;
            
            // æ›´æ–°é¢œè‰²
            if (score >= 80) {
                circle.classList.remove('score-good', 'score-warning', 'score-danger');
                circle.classList.add('score-excellent');
            } else if (score >= 60) {
                circle.classList.remove('score-excellent', 'score-warning', 'score-danger');
                circle.classList.add('score-good');
            } else if (score >= 40) {
                circle.classList.remove('score-excellent', 'score-good', 'score-danger');
                circle.classList.add('score-warning');
            } else {
                circle.classList.remove('score-excellent', 'score-good', 'score-warning');
                circle.classList.add('score-danger');
            }
        }

        // å‘é€æ¶ˆæ¯
        function sendMessage() {
            const input = document.getElementById('message-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            addMessage('user', message);
            input.value = '';
            
            // æ¨¡æ‹ŸAIå“åº”
            setTimeout(() => {
                handleAIResponse(message);
            }, 1000);
        }

        // å¤„ç†AIå“åº”
        function handleAIResponse(userMessage) {
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                let response = '';
                
                if (userMessage.includes('ä¼˜åŒ–') || userMessage.includes('å»ºè®®')) {
                    response = `åŸºäºå½“å‰æ¶æ„è¯„ä¼°ï¼Œä¸ºæ‚¨æä¾›ä»¥ä¸‹ä¼˜åŒ–å»ºè®®ï¼š

1. **çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2ä¸ªæœˆï¼‰**
   - å‡çº§è¿‡æ—¶çš„ä¾èµ–åº“ç‰ˆæœ¬
   - ä¼˜åŒ–æ•°æ®åº“æ…¢æŸ¥è¯¢
   - å¢åŠ å…³é”®æ¥å£çš„ç¼“å­˜

2. **ä¸­æœŸæ”¹è¿›ï¼ˆ3-6ä¸ªæœˆï¼‰**
   - å®æ–½å¾®æœåŠ¡æ‹†åˆ†
   - å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—è§£è€¦
   - å®Œå–„ç›‘æ§å‘Šè­¦ä½“ç³»

3. **é•¿æœŸè§„åˆ’ï¼ˆ6-12ä¸ªæœˆï¼‰**
   - äº‘åŸç”Ÿæ¶æ„æ”¹é€ 
   - å»ºç«‹å®Œæ•´çš„DevOpsæµç¨‹
   - å®æ–½æ··æ²Œå·¥ç¨‹æå‡ç¨³å®šæ€§`;
                } else if (userMessage.includes('é£é™©') || userMessage.includes('é—®é¢˜')) {
                    response = `å½“å‰æ¶æ„å­˜åœ¨çš„ä¸»è¦é£é™©ï¼š

âš ï¸ **é«˜ä¼˜å…ˆçº§é£é™©ï¼š**
- å®¢æˆ·æœåŠ¡ç³»ç»Ÿå¥åº·åº¦ä»…45%ï¼Œå­˜åœ¨å®•æœºé£é™©
- å‘ç°3ä¸ªé«˜å±å®‰å…¨æ¼æ´éœ€è¦ç«‹å³ä¿®å¤

âš¡ **ä¸­ç­‰é£é™©ï¼š**
- æ•°æ®åº“è¿æ¥æ± é…ç½®ä¸å½“ï¼Œé«˜å¹¶å‘æ—¶å¯èƒ½å´©æºƒ
- ç¼ºå°‘æœåŠ¡é™çº§å’Œç†”æ–­æœºåˆ¶

ğŸ“Š **æ½œåœ¨é£é™©ï¼š**
- æŠ€æœ¯æ ˆè€åŒ–ï¼Œç»´æŠ¤æˆæœ¬é€å¹´ä¸Šå‡
- ç¼ºå°‘å®Œæ•´çš„ç¾å¤‡æ–¹æ¡ˆ`;
                } else {
                    response = `æ”¶åˆ°æ‚¨çš„é—®é¢˜ï¼š"${userMessage}"

æˆ‘å¯ä»¥å¸®æ‚¨åˆ†ææ¶æ„çš„å„ä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬ï¼š
- å¥åº·åº¦è¯„ä¼°
- æŠ€æœ¯å€ºåŠ¡è¯†åˆ«
- æ€§èƒ½ä¼˜åŒ–å»ºè®®
- å®‰å…¨åˆè§„æ£€æŸ¥

è¯·é€‰æ‹©å·¦ä¾§çš„è¯„ä¼°é¡¹ç›®ï¼Œæˆ–ç»§ç»­æå‡ºå…·ä½“é—®é¢˜ã€‚`;
                }
                
                addMessage('assistant', response);
            }, 2000);
        }

        // æ·»åŠ æ¶ˆæ¯
        function addMessage(sender, content) {
            const container = document.getElementById('messages-container');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message-bubble ${sender}-message p-4 mb-4`;
            
            if (sender === 'assistant') {
                // ç®€å•çš„Markdownæ¸²æŸ“
                content = content
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\n/g, '<br>');
                messageDiv.innerHTML = `<div class="text-sm">${content}</div>`;
            } else {
                messageDiv.innerHTML = `<div class="text-sm">${content}</div>`;
            }
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        // æ˜¾ç¤ºè¾“å…¥æŒ‡ç¤ºå™¨
        function showTypingIndicator() {
            const container = document.getElementById('messages-container');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'typing-indicator mb-4';
            typingDiv.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <span class="ml-2 text-sm text-gray-500">AIæ­£åœ¨åˆ†æ...</span>
            `;
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;
        }

        // éšè—è¾“å…¥æŒ‡ç¤ºå™¨
        function hideTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) {
                indicator.remove();
            }
        }

        // å…³é—­è¯¦ç»†å¼¹çª—
        function closeDetailModal() {
            document.getElementById('detail-modal').classList.remove('show');
        }

        // å¯¼å‡ºæŠ¥å‘Š
        function exportReport() {
            alert('æ­£åœ¨ç”ŸæˆPDFæŠ¥å‘Š...\næŠ¥å‘Šå°†åŒ…å«å®Œæ•´çš„æ¶æ„è¯„ä¼°æ•°æ®å’Œä¼˜åŒ–å»ºè®®ã€‚');
        }

        // ç«‹å³ä¼˜åŒ–
        function optimizeNow() {
            alert('æ­£åœ¨å¯åŠ¨æ¶æ„ä¼˜åŒ–æµç¨‹...\nç³»ç»Ÿå°†è‡ªåŠ¨åˆ›å»ºä¼˜åŒ–ä»»åŠ¡å¹¶åˆ†é…ç»™ç›¸å…³å›¢é˜Ÿã€‚');
            closeDetailModal();
        }

        // æŸ¥çœ‹å†å²
        function viewHistory() {
            alert('å†å²è¯„ä¼°è®°å½•ï¼š\n- 2024-12: å¥åº·åº¦82åˆ†\n- 2025-01: å¥åº·åº¦75åˆ†\n- 2025-02: å¥åº·åº¦75åˆ†ï¼ˆå½“å‰ï¼‰');
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initSystemList();
            initTrendChart();
            
            // æ¨¡æ‹Ÿå®šæœŸæ›´æ–°
            setInterval(() => {
                const randomSystem = systems[Math.floor(Math.random() * systems.length)];
                const change = (Math.random() - 0.5) * 10;
                randomSystem.health = Math.max(0, Math.min(100, randomSystem.health + change));
                
                // æ›´æ–°çŠ¶æ€
                if (randomSystem.health >= 80) randomSystem.status = 'healthy';
                else if (randomSystem.health >= 60) randomSystem.status = 'warning';
                else randomSystem.status = 'critical';
                
                // é‡æ–°æ¸²æŸ“ç³»ç»Ÿåˆ—è¡¨
                document.getElementById('system-list').innerHTML = '';
                initSystemList();
            }, 30000);
        });
    </script>
</body>
</html>